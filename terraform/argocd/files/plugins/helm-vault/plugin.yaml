apiVersion: argoproj.io/v1alpha1
kind: ConfigManagementPlugin
metadata:
  name: ${plugin}-plugin
spec:
  version: v1.0
  init:
    command: [sh, /var/run/argocd/helm-plugin/init.sh]
  generate:
    command: [sh, /var/run/argocd/helm-plugin/generate.sh]
  discover:
    find:
      command:
        - sh
        - "-c"
        - "find . -name 'Chart.yaml' && find . -name 'values.yaml' && find . -name 'secrets.yaml'"
  parameters:
    static:
      - name: values-files
        title: VALUES FILES
        collectionType: array
    dynamic:
      command: [sh, /var/run/argocd/helm-plugin/get-parameters.sh]

